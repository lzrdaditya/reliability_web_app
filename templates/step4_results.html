<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Step 4: Results</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f5f7fa; }
        .main-card { max-width:620px; margin:48px auto; }
        .result-label { font-weight: bold; color: #222; }
        .result-value { font-family: "Roboto Mono", monospace; }
        .conversion { color: #6c757d; font-size: 0.9em; }
    </style>
</head>
<body>
<div class="card main-card shadow">
    <div class="card-header bg-dark text-white">
        <h4 class="mb-0">Step 4: Beta Analysis Results</h4>
    </div>
    <div class="card-body">
        {% if result.error %}
            <div class="alert alert-danger">Error: {{ result.error }}</div>
        {% else %}
            <ul class="list-group mb-3">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span class="result-label">Beta (Shape):</span>
                    <span class="result-value">{{ result.beta }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span class="result-label">Alpha (Scale):</span>
                    <span class="result-value">{{ result.alpha }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span class="result-label">Analysis:</span>
                    <span class="result-value">{{ result.pattern }}</span>
                </li>
            </ul>
            {% if result.pattern == "Age-related failure" %}
                <div class="mb-2">
                    <span class="result-label">Mission Time for Reliability {{result.reliability}}:</span>
                    <div class="result-value text-end">
                        {{ result.mission_time }} hours <br>
                        <small class="conversion">({{ result.mission_time_days }} days / {{ result.mission_time_months }} months / {{ result.mission_time_years }} years)</small>
                    </div>
                </div>
                <div class="text-secondary">Wear-out phase, failures increase over time.</div>
            {% elif result.pattern == "Random failure" %}
                <div class="mb-2">
                    <span class="result-label">MTBF (Mean Time Between Failures):</span>
                    <div class="result-value text-end">
                        {{ result.mtbf }} hours <br>
                        <small class="conversion">({{ result.mtbf_days }} days / {{ result.mtbf_months }} months / {{ result.mtbf_years }} years)</small>
                    </div>
                </div>
                <div class="mb-2 mt-3">
                    <span class="result-label">Non-Safety Device (MTBF × 2 × 0.02):</span>
                    <div class="result-value text-end">
                        {{ result.non_safety_calc }} hours <br>
                        <small class="conversion">({{ result.non_safety_calc_days }} days / {{ result.non_safety_calc_months }} months / {{ result.non_safety_calc_years }} years)</small>
                    </div>
                </div>
                <div class="mb-2 mt-3">
                    <span class="result-label">Safety Device (MTBF × 2 × 0.01):</span>
                     <div class="result-value text-end">
                        {{ result.safety_calc }} hours <br>
                        <small class="conversion">({{ result.safety_calc_days }} days / {{ result.safety_calc_months }} months / {{ result.safety_calc_years }} years)</small>
                    </div>
                </div>
                <div class="text-secondary">Failures occur randomly, no clear age effect.</div>
            {% elif result.pattern == "Infant mortality (RCA Required)" %}
                <div class="mb-2">
                    <span class="result-label">Action:</span>
                    <span class="result-value">Root Cause Analysis required. Adjust design/process.</span>
                </div>
                <div class="text-secondary">Early life failures, further analysis needed.</div>
            {% endif %}
            <div class="mt-4 text-end">
                <a href="{{ url_for('step1_method') }}" class="btn btn-outline-secondary">&larr; Start Over</a>
            </div>
        {% endif %}
    </div>
</div>
</body>
</html>